{% extends "layout.html" %}
{% block body %}

<body style="background: #5296bb;">
<link rel="stylesheet" href="{{ url_for('static', filename='css/execute.css') }}">
    <nav class="navbar navbar-dark navbar-expand-md py-3" style="background: #375a7f;">
        <div class="container"><a class="navbar-brand d-flex align-items-center" href="#"><span>Nikolai Rylov</span></a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-5"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navcol-5">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" href="/">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/listfiles">Script List</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <section>
        <div class="container">
            <h1 class="text-center" style="color: #ffffff;">Script list</h1>
            <hr>
            <div class="row">
                <div class="col">
                    <form>
                        <div>
                            <div class="row">
                                <table id="myTable" class="display" style="width:100%; border-style: solid;">
                                    <thead>
                                        <tr>
                                            <th>Filename</th>
                                            <th>Upload date</th>
                                            <th>Execute</th>
                                            <th>Download</th>
                                            <th>Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    {% for result in results %}
                                    <tr>
                                        <td>{{ result["filename"] }}</td>
                                        <td>{{ result["datetime(date, 'unixepoch')"] }}</td>
                                        <td><a id="myBtn" href="/execute/{{ result['id'] }}">link</a></td>
                                        <td><a href="/retrieve/{{ result['id'] }}">link</a></td>
                                        <td><a href="/delete/{{ result['id'] }}">link</a></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <th>Filename</th>
                                        <th>Upload date</th>
                                        <th>Execute</th>
                                        <th>Download</th>
                                        <th>Delete</th>
                                    </tr>
                                </tfoot>
                            </table>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/1.12.0/js/jquery.dataTables.min.js"></script>
    <script src="{{ url_for('static', filename='js/table.js') }}"></script>
</body>
{% endblock %}